<rules xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.xebialabs.com/deployit/xl-rules"
       xsi:schemaLocation="http://www.xebialabs.com/deployit/xl-rules xl-rules.xsd">


    <rule name="startStopServer" scope="plan">
        <script>
<![CDATA[

restartRequired = False
for delta in deltas.getDeltas():
	if (delta.getOperation() != Operation.NOOP):
		restartRequired = True
		break

if(restartRequired):
	context.addStep(steps.success(description = "Stopping server", order = 10))
	context.addStep(steps.success(description = "Starting server", order = 90))

]]>
        </script>
    </rule>

    <rule name="deployArtifact" scope="deployed">
        <script>
<![CDATA[

if(delta.getOperation() != Operation.NOOP):
	descr = "Step to " + delta.getOperation().toString() + " artifact with name " + currentDeployed(delta).getName()
	context.addStep(steps.success(description = descr, order = 90))

]]>
        </script>
    </rule>

</rules>
